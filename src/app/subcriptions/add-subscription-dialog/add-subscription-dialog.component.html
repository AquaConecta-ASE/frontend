<div class="dialog-container">
  <div class="dialog-header">
    <h2 class="dialog-title">
      <span class="header-icon">+</span>
      {{ translate('add_new_subscription') }}
    </h2>
    <button class="close-button" (click)="onCancel()">
      <span class="close-icon">Ã—</span>
    </button>
  </div>

  <div class="dialog-content">
    <form [formGroup]="subscriptionForm">
      <div class="form-field-container">
        <label class="form-label">{{ translate('water_tank_size') }}</label>
        <div class="input-container">
          <input 
            type="number" 
            formControlName="waterTankSize"
            [placeholder]="translate('water_tank_size_placeholder')"
            min="1"
            class="form-input">
          <span class="input-icon">ðŸ’§</span>
        </div>
        <div class="error-message" *ngIf="subscriptionForm.get('waterTankSize')?.invalid && subscriptionForm.get('waterTankSize')?.touched">
          {{ getErrorMessage('waterTankSize') }}
        </div>
      </div>

      <!-- Mostrar el monto calculado cuando se ingresa un valor vÃ¡lido -->
      <div class="payment-info" *ngIf="showPaymentForm && paymentAmount > 0">
        <div class="amount-display">
          <span class="amount-label">{{ translate('amount_to_pay') }}</span>
          <span class="amount-value">S/ {{ paymentAmount.toFixed(2) }}</span>
        </div>
        <div class="price-breakdown">
          <span class="breakdown-text">{{ translate('device_monitoring_installation') }}</span>
        </div>
      </div>

      <div class="info-message">
        <span class="info-icon">â„¹</span>
        <span>{{ translate('subscription_info') }} {{ data.residentId }}</span>
      </div>

      <div class="error-message" *ngIf="error">
        <span class="error-icon">âš </span>
        <span>{{ error }}</span>
      </div>
    </form>
  </div>

  <div class="dialog-actions">
    <button 
      type="button"
      class="cancel-button" 
      (click)="onCancel()" 
      [disabled]="isLoading">
      <span class="button-icon">âœ•</span>
      {{ translate('cancel_subscription') }}
    </button>
    <button 
      type="button"
      class="submit-button" 
      (click)="onSubmit()"
      [disabled]="subscriptionForm.invalid || isLoading">
      <span class="button-icon" *ngIf="!isLoading">âž•</span>
      <span class="loading-spinner" *ngIf="isLoading"></span>
      {{ isLoading ? translate('processing_subscription') : translate('add_subscription') }}
    </button>
  </div>
</div>
 